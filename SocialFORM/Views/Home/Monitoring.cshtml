<div>
    <h1>Мониторинг</h1>
    <div class="list_monitorig" id="list_monitorig"></div>
</div>

<script type="text/javascript">
    setInterval(function () {
        $.get("/Home/getMonitoring")
            .success(function (monitoring) {
                if ($('#list_monitorig p').length == 0) {
                    console.info("Monitoring ---->", monitoring)
                    var code = null;
                    var string = [];
                    $.each(monitoring, function (i, item) {
                        string = item.split("_");
                        console.info("Split string --->", string);
                        if (string[1] == "1") {
                            code = '<p id=' + Number(string[2])+'>' + string[0] + '<img id="status_monitoring" class="online" src="../images/icon/status.png" /></p>';
                            $('#list_monitorig').append(code);
                        }
                        else {
                            code = '<p id=' + Number(string[2]) +'>' + string[0] + '<img id="status_monitoring" class="offline" src="../images/icon/status_busy.png" /></p>';
                            $('#list_monitorig').append(code);
                        }
                    });
                } else {
                    var code = null;
                    var string = null;
                    $.each(monitoring, function (i, item) {
                        string = item.split("_");
                        if ($('p[id=' + string[2] + ']').length > 0) {
                            var tmp_status = $('p[id=' + string[2] + ']').find('img').hasClass('online') ? 1 : 0;
                            console.info("status --->", tmp_status);
                            if (Number(string[1]) != tmp_status) {
                                if (string[1] == '0') {
                                    $('p[id=' + string[2] + ']').find('img').removeClass().addClass('offline');
                                    $('p[id=' + string[2] + ']').find('img').attr('src', '../images/icon/status_busy.png');
                                }
                                else {
                                    $('p[id=' + string[2] + ']').find('img').removeClass().addClass('online');
                                    $('p[id=' + string[2] + ']').find('img').attr('src', '../images/icon/status.png');
                                }
                            }
                        }
                    });
                }
            });
    }, 3000);
</script>